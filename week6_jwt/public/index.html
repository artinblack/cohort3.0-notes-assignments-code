<head>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/axios/1.7.6/axios.min.js"></script>
</head>

<!DOCTYPE html>
<html lang="en">
<head>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/axios/1.7.6/axios.min.js"></script>
</head>
<body>
    <div>
        Signup 
        <input type="text" name="username" id="signup-username" placeholder="Username">
        <input type="text" name="password" id="signup-password" placeholder="Password">
        <button onclick="signup()">Signup</button>
    </div>
    <div>
        Signin
        <input type="text" name="username" id="signin-username" placeholder="Username">
        <input type="password" name="password" id="signin-password" placeholder="Password">
        <button onclick="signin()">Signin</button>
    </div>
    <div>
        User Information : 
        <div id="information">

        </div>
    </div>
    <div>
        <button onclick="logout()">
            Logout
        </button>
    </div>
    <script>
        async function signup() {
            const username = document.getElementById('signup-username').value ; 
            const password = document.getElementById('signup-password').value ; 

            const response = await axios.post("http://localhost:3000/signup",{
                username : username , 
                password : password 
            }) ; 
            alert('Signed up successfully !!') ; 
        }   
        async function signin() { 
            const username = document.getElementById('signin-username').value ; 
            const password = document.getElementById('signin-password').value ; 
            
            const response = await axios.post("http://localhost:3000/signin",{
                username : username , 
                password : password 
            }) ; 

            localStorage.setItem("token",response.data.token)
            // in every subsequent request I don't have to copy and paste the token from the browser again and again to get the desired route it just stores it locally on the browser as a cache memory 
            alert('You are signed in')
        }
        async function logout() { 
            localStorage.removeItem("token") ; 
            window.location.reload() ; 
        }
        async function getUserInformation() { 
            const token = localStorage.getItem("token") ; 

            if(token) { 
                const response = await axios.get("http://localhost:3000/me",{
                    headers : { 
                        token : token
                    }
                })
                document.getElementById('information').innerHTML = response.data.username ; 
            }
        }
        getUserInformation() 
    </script>
</body>
</html>